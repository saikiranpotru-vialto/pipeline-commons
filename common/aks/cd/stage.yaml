parameters:
  - name: env
    type: string
  - name: condition
    default: succeeded()
  - name: agentPool
    type: string
    default: 'Azure Pipelines'
  - name: serviceName
    type: string
    default: 'Test'

stages:
  - stage: "CD_${{ parameters.env }}"
    condition: ${{ parameters.condition }}
    displayName: "Deploy ${{ parameters.env }}"
    jobs:
      - template: job.yaml
        parameters:
          env: ${{ parameters.env }}
          agentPool: ${{ parameters.agentPool }}
          serviceName: ${{ parameters.serviceName }}